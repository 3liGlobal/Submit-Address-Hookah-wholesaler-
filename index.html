<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Submit&#x20;Address&#x20;-&#x20;Hookah&#x20;wholesaler</title>
	<link href="css/form.css" rel="stylesheet" type="text/css">
	<script src="js/validation.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/google-libphonenumber/3.2.13/libphonenumber.min.js"></script>
	<style>
		.state-dropdown,
		.state-text,
		.city-text,
		.zip-text {
			display: none;
		}
	</style>
</head>

<body class="zf-backgroundBg">
	<!-- Change or deletion of the name attributes in the input tag will lead to empty values on record submission-->
	<div class="zf-templateWidth">
		<form
			action='https://forms.zohopublic.com/airglobal/form/SubmitAddressHookahwholesaler/formperma/ysph0y-C4sVB2Xyc78ft8DO3L_-1fA-DE-1nAsLsSd4/htmlRecords/submit'
			name='form' method='POST' onSubmit='javascript:document.charset="UTF-8"; return zf_ValidateAndSubmit();'
			accept-charset='UTF-8' enctype='multipart/form-data' id='form'><input type="hidden" name="zf_referrer_name"
				value=""><!-- To Track referrals , place the referrer name within the " " in the above hidden input field -->
			<input type="hidden" name="zf_redirect_url"
				value=""><!-- To redirect to a specific page after record submission , place the respective url within the " " in the above hidden input field -->
			<input type="hidden" name="zc_gad"
				value=""><!-- If GCLID is enabled in Zoho CRM Integration, click details of AdWords Ads will be pushed to Zoho CRM -->
			<div class="zf-templateWrapper"><!---------template Header Starts Here---------->
				<ul class="zf-tempHeadBdr">
					<li class="zf-tempHeadContBdr">
						<h2 class="zf-frmTitle"><em>New Address</em></h2>
						<p class="zf-frmDesc"></p>
						<div class="zf-clearBoth"></div>
					</li>
					<ul id="progressbar">
						<li class="active" id="personal">
							<strong>New Address</strong>
						</li>
					</ul>
				</ul><!---------template Header Ends Here---------->
				<!---------template Container Starts Here---------->
				<div class="zf-subContWrap zf-topAlign">
					<ul>
						<!---------Email Starts Here---------->
						<li class="zf-tempFrmWrapper zf-large col2"><label class="zf-labelName">
								Email
								<em class="zf-important">*</em>
							</label>
							<div class="zf-tempContDiv">
								<span id="loaderContainer"> <input fieldType=9 type="text" maxlength="255" name="Email"
										checktype="c5" value="" placeholder="" id="Email" />
									<div id="loader"></div>
								</span>
								<p id="Email_error" class="zf-errorMessage" style="display:none;">Please complete this
									required field.</p>
							</div>
							<div class="zf-clearBoth"></div>
						</li>
						<!---------Email Ends Here---------->

						<!--address-->

						<!---------Phone Starts Here---------->
						<li class="zf-tempFrmWrapper zf-large">
							<label class="zf-labelName">Phone</label>
							<div class="zf-tempContDiv">
								<span class="zf-addOne">
									<input type="text" compname="PhoneNumber" name="PhoneNumber_countrycode"
										maxlength="20" checktype="c7" value="" phoneFormat="1"
										isCountryCodeEnabled=false fieldType="11"
										id="international_PhoneNumber_countrycode" valType="number" phoneFormatType="1"
										placeholder="" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
								</span>
								<p id="PhoneNumber_error" class="zf-errorMessage" style="display:none;">Please complete
									this required field.
								</p>
							</div>
							<div class="zf-clearBoth"></div>
						</li><!---------Phone Ends Here---------->
						<!---------Dropdown Starts Here---------->
						<li class="zf-tempFrmWrapper zf-small"><label class="zf-labelName">
								Address Location
								<em class="zf-important">*</em>
							</label>
							<div class="zf-tempContDiv">
								<select class="zf-form-sBox" name="Dropdown2" checktype="c1">
									<option selected="true" value="-Select-">Select</option>
									<option value="Residential&#x20;Location">Residential Location</option>
									<option value="Business&#x20;Location">Business Location</option>
									<option value="Alternate&#x20;Business&#x20;Location">Alternate Business Location
									</option>
									<option value="Freight&#x20;Forwarder">Freight Forwarder</option>
									<option value="Freight&#x20;Pickup&#x20;Center">Freight Pickup Center</option>
								</select>
								<p id="Dropdown2_error" class="zf-errorMessage" style="display:none;">Please select the required field</p>
							</div>
							<div class="zf-clearBoth"></div>
						</li><!---------Dropdown Ends Here---------->

						<!---------Address Starts Here---------->
						<li class="zf-tempFrmWrapper zf-address zf-addrlarge ">
							<div class="zf-tempContDiv zf-address">
								<div class="zf-addrCont">
									<div class="name-item-2">
										<span class="zf-flLeft zf-addtwo">
											<label>Country
												<em class="zf-important">*</em>
											</label>
											<select class="zf-form-sBox dropdown-countries" name="Address_Country"
												checktype="c1">
												<!-- <option value="-Select-" selected="selected">-Select-</option> -->
												<option value="" selected="selected" disabled>Select Country</option>

											</select>

										</span>
									</div>

									<div class="name-item">

										<span class="zf-flLeft zf-addtwo">
											<label>Street Address
												<em class="zf-important">*</em>
											</label>
											<input type="text" maxlength="255" name="Address_AddressLine1"
												checktype="c1" placeholder="Street Address" class="street"
												id="searchInput" oninput="searchDropdown()" />
											<div class="dropdown-list"></div>
										</span>
									</div>

									<div class="name-item-2">
										<span class="zf-flLeft zf-addtwo">
											<label>City
												<em class="zf-important">*</em>
											</label>
											<input type="text" class="Address_City city-text" name="Address_City"
												maxlength="255" placeholder="" autocomplete="off" />

										</span>

										<span class="zf-flLeft zf-addtwo">
											<label>State/Region/Province
												<em class="zf-important star">*</em>
											</label>
											<select class="state-dropdown" checktype="c1" placeholder="">
												<option value="" selected="selected" disabled>Select State</option>
											</select>
											<input type="text" class="Address_Region state-text" name="Address_Region"
												placeholder="Enter State">

											<!-- <input type="text" maxlength="255" name="Address_Region" checktype="c1"
													placeholder="" /> -->
										</span>
										<span style="display: none;">
											<label>State Label</label>
											<input type="text" name="SingleLine2" id="stateLabel" checktype="c1"
												value="" maxlength="255" fieldType=1 placeholder="" />
										</span>

										<span class="zf-flLeft zf-addtwo disabled">
											<label>Postal / Zip Code
												<em class="zf-important">*</em>
											</label>
											<input type="text" maxlength="255" placeholder="" name="Address_ZipCode"
												id="postalCode" class="Address_ZipCode zip-text" autocomplete="off" />

										</span>
										<span class="zf-addOne">
											<label>County
												<em class="zf-important">*</em>
											</label>
											<input type="text" maxlength="255" name="SingleLine1" checktype="c1"
												placeholder="" class="county" id="county" autocomplete="off" />
											<p id="SingleLine1_error" class="zf-errorMessage" style="display:none;">
												Please complete this required field.</p>
										</span>
									</div>

									<div class="name-item" style="display: none;">

										<span class="zf-addOne">
											<label>Suite/Unit/Apt. Number
											</label>
											<input type="text" maxlength="255" name="Address_AddressLine2"
												checktype="c1" placeholder="" autocomplete="off" />
										</span>
									</div>

									<div class="zf-clearBoth"></div>
									<p id="Address_error" class="zf-errorMessage" style="display:none;">
										Some of the mandatory field is empty
									</p>
								</div>
							</div>
							<div class="zf-eclearBoth"></div>
						</li><!---------Address Ends Here---------->

						<!---------Licence Starts Here---------->
						<li class="zf-tempFrmWrapper zf-large">
							<label class="zf-labelName">Licence</label>
							<div class="zf-tempContDiv">
								<span class="zf-addOne">
									<input type="file" maxlength="255" name="FileUpload" />
								</span>
								<p id="FileUpload_error" class="zf-errorMessage" style="display:none;">Choose any file
									for this field.</p>
							</div>
							<div class="zf-clearBoth"></div>
						</li><!---------Licence Ends Here---------->
					</ul>




				</div><!---------template Container Starts Here---------->
				<ul>
					<li class="zf-fmFooter"><button class="zf-submitColor" id="zf-submitColor">Submit</button>
					</li>
				</ul>

			</div><!-- 'zf-templateWrapper' ends -->
		</form>
	</div><!-- 'zf-templateWidth' ends -->
	<script type="text/javascript">var zf_DateRegex = new RegExp("^(([0][1-9])|([1-2][0-9])|([3][0-1]))[-](Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec|JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[-](?:(?:19|20)[0-9]{2})$");
		var zf_FieldArray = ["Email", "Address_AddressLine1", "Address_City", "Address_Region", "Address_ZipCode", "Address_Country", "SingleLine1", "Dropdown2"]; // , "PhoneNumber_countrycode", "FileUpload"	
		var zf_MandArray = ["Address_AddressLine1", "Address_City", "Address_Region", "Address_ZipCode", "Address_Country"];
		var isSalesIQIntegrationEnabled = false;
		var salesIQFieldsArray = [];
	</script>
	<script src="js/states.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
	<script>
		const dropdownList = $(".dropdown-list");
		const addressInfo = $(".addressInfo");

		function fetchData(query, callback) {
			$.get(query, callback);
		}

		// Function to handle the search input
		function searchDropdown() {
			var country = $(".dropdown-countries").find(":selected").text();
			var country_val = $(".dropdown-countries").find(":selected").val();
			if (country_val == "USA") {
				var city = $(".Address_City").val();
				var zipCode = $(".Address_ZipCode").val();
				var inputLength = $("#searchInput").val().length;
				if (inputLength > 0) {
					const query = `https://api.addressy.com/Capture/Interactive/Find/v1.10/json3.ws?Key=TY78-BD75-NW81-XE97&Countries=US&Limit=20&Text=${$(
						"#searchInput"
					).val()}`;

					// Call the API to get data based on the search query
					fetchData(query, (data) => {
						const filteredOptions = data.Items;
						dropdownList.empty();
						filteredOptions.forEach((option) => {
							if (option.Type === "Container" || option.Type === "Street" || option.Type === "Locality" || option.Type === "BuildingNumber") {
								dropdownList.append(
									`<div class="dropdown-item"> ${option.Text} ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description} <span id="${option.Id}" onclick="callback(event, this);">see all ${option.Description}</span></div>`
								);
							} else {
								dropdownList.append(
									`<div class="dropdown-item" id="${option.Id}" onclick="getAddressDetail(event, this);"> ${option.Text} ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description}</div>`
								);
							}
						});
					});
				} else {
					dropdownList.empty();
				}
			} else {
				dropdownList.empty();
			}
		}

		function callback(e, thisObj) {
			let id = thisObj.id;
			const query = `https://api.addressy.com/Capture/Interactive/Find/v1.10/json3.ws?Key=TY78-BD75-NW81-XE97&Countries=US&Limit=20&Container=${id}`;
			fetchData(query, (data) => {
				const filteredOptions = data.Items;
				dropdownList.empty();
				dropdownList.css({ "max-height": "300px", "overflow-y": "auto" });

				filteredOptions.forEach((option) => {
					if (option.Type === "Container") {
						dropdownList.append(
							`<div class="dropdown-item"> ${option.Text} ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description}<span id="${option.Id}" onclick="callback(event, this);">see all ${option.Description}</span></div>`
						);
					} else if (option.Type === "Street") {
						dropdownList.append(
							`<div class="dropdown-item" id="Street, ${option.Text}" onclick="getAddressDetail(event, this);"> ${option.Text} ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description}  <span id="${option.Id}" onclick="callback(event, this);">see all ${option.Description}</span></div></div>`
						);
					} else if (option.Type === "Locality") {
						dropdownList.append(
							`<div class="dropdown-item" id="Locality, ${option.Text}" onclick="getAddressDetail(event, this);"> ${option.Text} ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description} <span id="${option.Id}" onclick="callback(event, this);">see all ${option.Description}</span></div></div>`
						);
					} else if (option.Type === "BuildingNumber") {
						dropdownList.append(
							`<div class="dropdown-item" id="BuildingNumber, ${option.Text}" onclick="getAddressDetail(event, this);"> ${option.Text}  ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description}<span id="${option.Id}" onclick="callback(event, this);">see all ${option.Description}</span></div></div>`
						);
					} else {
						dropdownList.append(
							`<div class="dropdown-item" id="${option.Id}" onclick="getAddressDetail(event, this);"> ${option.Text} ${option.Description.includes("-") ? option.Description.substring(0, option.Description.lastIndexOf(" - ")) : option.Description}</div>`
						);
					}
				});
			});
		}

		function getAddressDetail(e, thisObj) {
			let id = thisObj.id;
			const query = `https://api.addressy.com/Capture/Interactive/Retrieve/v1.2/json3.ws?Key=TY78-BD75-NW81-XE97&Id=${id}`;
			fetchData(query, (data) => {
				const filteredOptions = data.Items;
				filteredOptions.forEach((option) => {
					$(".street").val(option.Line1)
					$(".city-text").val(option.City)
					$("#stateLabel").val(option.ProvinceName)
					$(".state-dropdown").val(option.ProvinceCode).change();
					$("#postalCode").val(option.PostalCode)
					$("#county").val(option.AdminAreaName)
					dropdownList.empty();
				});
			});
		}

		var iti = window.intlTelInput(document.querySelector("#international_PhoneNumber_countrycode"), {
			separateDialCode: false,
			preferredCountries: ["US"],
			allowDropdown: true,
			hiddenInput: "full",
			utilsScript: "//cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.3/js/utils.js"
		});

		document.addEventListener("keydown", function (event) {
			if (event.key === "Enter") {
				event.preventDefault(); // Prevent form from being submitted through enter key
				zf_ValidateAndSubmit();
			}
		});
	</script>

	<script>
		window.addEventListener('message', function (event) {
			var email = event.data;
			document.getElementById('Email').value = email;
		});
	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
	<script>
		window.addEventListener('message', function (event) {
			var email = event.data;
			document.getElementById('Email').value = email;
			document.getElementById("Email").readOnly = true;
			let checkField = setInterval(function () {
				if ($('#Email').val() !== '') {
					$('#loader').hide();
					clearInterval(checkField);
				}
			}, 100);
			$('#loader').hide();
		});
	</script>

	<script>
		$('form').submit(function () {
			var submitButton = $('#zf-submitColor');
			var submitHoverButton = $('#zf-submitColor:hover');

			// Disable the button and change its color to grey
			submitButton.css('cursor', 'not-allowed');
			// submitButton.html('Submitting...');
			submitButton.css('background-color', '#d1d5db');
			submitHoverButton.css('background-color', '#d1d5db');
			submitButton.css('color', '#4b5563');
			submitButton.prop('disabled', true);

			// Re-enable the button and change its color back after 5 seconds
			setTimeout(function () {
				submitButton.prop('disabled', false);
				submitButton.css('cursor', 'pointer'); // Reset to default color
				// submitButton.html('Submit');
				submitButton.css('background-color', 'black');
				submitButton.css('color', 'white');

			}, 5000);
		});
	</script>

</body>

</html>